<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Sample Size and Power for the Test of the Difference in Restricted Mean Survival Time — RMSTpow • RMSTdesign</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Sample Size and Power for the Test of the Difference in Restricted Mean Survival Time — RMSTpow" />

<meta property="og:description" content="Determine the asymptotic power of the test of RMST under a given trial design, or
calculate the samples size needed to achieve a desired power." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RMSTdesign</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Compare-to-SSRMST.html">Compare Power from RMSTdesign and SSRMST Packages</a>
    </li>
    <li>
      <a href="../articles/GOG111-Trial.html">Trial design example based on GOG111 trial data</a>
    </li>
    <li>
      <a href="../articles/Optimal-trial-design.html">Using RMSTdesign to Find Optimal Trial Designs</a>
    </li>
    <li>
      <a href="../articles/RMSTdesign-package-validation.html">RMSTdesign-package-validation</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/anneae/RMSTdesign">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Sample Size and Power for the Test of the Difference in Restricted Mean Survival Time</h1>
    <small class="dont-index">Source: <a href='https://github.com/anneae/RMSTdesign/blob/master/R/RMSTpow.R'><code>R/RMSTpow.R</code></a></small>
    <div class="hidden name"><code>RMSTpow.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Determine the asymptotic power of the test of RMST under a given trial design, or
calculate the samples size needed to achieve a desired power.</p>
    
    </div>

    <pre class="usage"><span class='fu'>RMSTpow</span>(<span class='no'>survdefC</span>, <span class='no'>survdefT</span>, <span class='no'>k1</span>, <span class='no'>k2</span>, <span class='no'>tau</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>power</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>plot</span> <span class='kw'>=</span> <span class='no'>F</span>, <span class='kw'>sim</span> <span class='kw'>=</span> <span class='no'>F</span>, <span class='kw'>M</span> <span class='kw'>=</span> <span class='fl'>1000</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"tau_star"</span>, <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>two.sided</span> <span class='kw'>=</span> <span class='no'>F</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>survdefC</th>
      <td><p>the survival distribution of the control group, as a list in the form output by <code>survdef</code>.</p></td>
    </tr>
    <tr>
      <th>survdefT</th>
      <td><p>the survival distribution of the treatment group, as a list in the form output by <code>survdef</code>.</p></td>
    </tr>
    <tr>
      <th>k1</th>
      <td><p>length of the accrual period. We assume subjects will accrue
uniformly over the interval <code>(0, k1)</code> and then be followed until trial time <code>k1+k2</code>.</p></td>
    </tr>
    <tr>
      <th>k2</th>
      <td><p>length of the follow-up period.</p></td>
    </tr>
    <tr>
      <th>tau</th>
      <td><p>restriction time for the RMST.</p></td>
    </tr>
    <tr>
      <th>n</th>
      <td><p>total sample size for both groups. 1:1 randomization is assumed.
Either <code>n</code> or <code>power</code> can be specified, and the other value will be calculated.</p></td>
    </tr>
    <tr>
      <th>power</th>
      <td><p>the desired power.</p></td>
    </tr>
    <tr>
      <th>plot</th>
      <td><p>if T, plots of the assumed survival distributions and power
as a function of sample size, accrual time ka1and follow-up time k2 will be produced.
Default is F.
The power of the RMST test, the log-rank test using all available followup and
the log-rank test using only followup to time tau after randomization will be
displayed. If two-sided=T, the power of the test for superiorty (treatment over
control) and inferiority (control over treatment), are represented with solid
and dashed lines, respectively.</p></td>
    </tr>
    <tr>
      <th>sim</th>
      <td><p>if T, simulations will be conducted and empirical power and other
summary statistics will be provided. Default is F. The hypothesis tests are
carried out based on the normal approximation with the variance estimated
according to the Greenwood plug-in/infinitesimal jackknife method.
Specifying situations where survival doesn't go to zero in a reasonable
amount of time (trial length times 1000) will lead to problems if the
<code>sim=T</code> option is used.</p></td>
    </tr>
    <tr>
      <th>M</th>
      <td><p>number of simualations. Default is 1000.</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>modification to be used in simulations if the Kaplan-Meier
estimate is not defined at time <code>tau</code> in either group. Default is 'tau_star',
which changes the restriction time to the last censoring time,
if the last observation is censored at a time earlier than <code>tau</code>.
Other possible values are 'gill', 'efron', 'tau_star', 'risk1', 'risk2',
and 'risk5'. The riskX' options indicate estimating RMST difference at the
latest time at which at least X people are at risk in each group,
irrespective of the value of <code>tau</code>.</p></td>
    </tr>
    <tr>
      <th>alpha</th>
      <td><p>type I error level. Default is 0.025 if 'two.sided'=F and 0.05
if 'two.sided'=T.</p></td>
    </tr>
    <tr>
      <th>two.sided</th>
      <td><p>whether a two-sided test is desired. Default is F, meaning that
all reported power values correspond to a test of the superiority of treatment
over control. If set to T, the power for a test of superiority (treatment over control)
and inferiority (control over treatment) will be reported separately in the results;
the power of a two-sided test is the sum of two.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a list with components</p>
<dt>n</dt><dd><p>the user-specified n, or if n was left blank, the n needed to achieve the user-specified power.</p></dd>
<dt>powerRMST</dt><dd><p>the user-specified power, or if power was left blank, the asymptotic power of the RMST test.
If <code>one-sided=T</code>, <code>powerRMST</code> is equivalent to <code>powerRMSToverC</code>.
If <code>one-sided=F</code>, <code>powerRMST</code> is equivalent to the sum of the power of a one-sided test in each direction, i.e.
<code>powerRMSToverC + powerRMSCoverT</code>.</p></dd>
<dt>powerRMSToverC</dt><dd><p>the asymptotic power for a test of superiority of treatment over control.</p></dd>
<dt>powerRMSCoverT</dt><dd><p>the asymptotic power for a test of superiority of control over treatment.
If a one-sided test is specified, this is set to NA.</p></dd>
<dt>powerLRToverC</dt><dd><p>the asymptotic power of the log-rank test of superiority
of treatment over control.</p></dd>
<dt>powerLRCoverT</dt><dd><p>the asymptotic power of the log-rank test of superiority
of control over treatment. If a one-sided test is specified, this is set to NA.</p></dd>
<dt>powerLRtauToverC</dt><dd><p>the asymptotic power of the log-rank test of superiority
of treatment over control, using only data up to time tau after randomization.</p></dd>
<dt>powerLRtauCoverT</dt><dd><p>the asymptotic power of the log-rank test of superiority
of control over treatment, using only data up to time tau after randomization.
If a one-sided test is specified, this is set to NA.</p></dd>
<dt>pKME</dt><dd><p>the probability that you will be able to estimate RMST difference
at time tau using the standard Kaplan-Meier estimator. If the last observation
in either group is censored, and the censoring time is less than tau, the
Kaplan-Meier estimate is not defined through time tau, and the RMST difference
cannot be estimated using the standard area under the Kaplan-Meier curve. A
modified estimator must be used.</p></dd>
<dt>simout</dt><dd><p>a list returned if <code>sim = T</code>, with components:</p></dd>


<code>emppowRMSTToverC</code> empirical power of the RMST test for the superiority of
treatment over control.
<code>emppowRMSTCoverT</code> empirical power of the RMST test for the superiority of
control over treatment. If a one-sided test is specified, this is set to NA.
<code>emppowLRToverC</code> empirical power of the log-rank test for the superiority of
treatment over control.
<code>emppowLRCoverT</code> empirical power of the log-rank testthe superiority of
control over treatment. If a one-sided test is specified, this is set to NA.
<code>emppowLRtauToverC</code> empirical power of the log-rank test for the superiority of
treatment over control, using only data up to time tau after randomization.
<code>emppowLRtauCoverT</code> empirical power of the log-rank testthe superiority of
control over treatment, using only data up to time tau after randomization.
If a one-sided test is specified, this is set to NA.
<code>emppKME</code> proportion of simulations where the standard KM estimator was used.
<code>meandiff</code> mean estimated difference in RMST across the simulated datasets.
<code>SDdiff</code> standard deviation of the estimated difference in RMST across the simulated datasets.
<code>meantrunc</code> mean truncation time used in the simulated datasets (may be smaller than tau if method = 'tau_star' or 'riskX' options are used).
<code>SDtrunc</code> standard deviation of the truncation time used in the simulated datasets.


    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>con</span><span class='kw'>&lt;-</span><span class='fu'><a href='survdef.html'>survdef</a></span>(<span class='kw'>times</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>surv</span> <span class='kw'>=</span> <span class='fl'>0.5</span>)
<span class='no'>trt</span><span class='kw'>&lt;-</span><span class='fu'><a href='survdef.html'>survdef</a></span>(<span class='kw'>haz</span> <span class='kw'>=</span> <span class='fl'>0.67</span>*<span class='no'>con</span>$<span class='fu'>h</span>(<span class='fl'>1</span>))
<span class='fu'>RMSTpow</span>(<span class='no'>con</span>, <span class='no'>trt</span>, <span class='kw'>k1</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>k2</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>tau</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>power</span> <span class='kw'>=</span> <span class='fl'>0.8</span>)</div><div class='output co'>#&gt; $n
#&gt; [1] 552
#&gt; 
#&gt; $powerRMST
#&gt; [1] 0.8008182
#&gt; 
#&gt; $powerRMSTToverC
#&gt; [1] 0.8008182
#&gt; 
#&gt; $powerRMSTCoverT
#&gt; [1] NA
#&gt; 
#&gt; $powerLRToverC
#&gt; [1] 0.8708721
#&gt; 
#&gt; $powerLRCoverT
#&gt; [1] NA
#&gt; 
#&gt; $powerLRtauToverC
#&gt; [1] 0.8708721
#&gt; 
#&gt; $powerLRtauCoverT
#&gt; [1] NA
#&gt; 
#&gt; $pKME
#&gt; [1] 1
#&gt; </div><div class='input'><span class='fu'>RMSTpow</span>(<span class='no'>con</span>, <span class='no'>trt</span>, <span class='kw'>k1</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>k2</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>tau</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>552</span>)</div><div class='output co'>#&gt; $n
#&gt; [1] 552
#&gt; 
#&gt; $powerRMST
#&gt; [1] 0.8008182
#&gt; 
#&gt; $powerRMSTToverC
#&gt; [1] 0.8008182
#&gt; 
#&gt; $powerRMSTCoverT
#&gt; [1] NA
#&gt; 
#&gt; $powerLRToverC
#&gt; [1] 0.8708721
#&gt; 
#&gt; $powerLRCoverT
#&gt; [1] NA
#&gt; 
#&gt; $powerLRtauToverC
#&gt; [1] 0.8708721
#&gt; 
#&gt; $powerLRtauCoverT
#&gt; [1] NA
#&gt; 
#&gt; $pKME
#&gt; [1] 1
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Anne Eaton.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

